<!DOCTYPE html>
<html>
	<head>
		<title>Farmability</title>
		<link rel="stylesheet" type="text/css" href="css/info.css">
		<link rel="icon" type="image/png" href="img/icon.png">
	</head>
	<body onload="updateImage()">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="js/info.js"></script>
		<div id="header">
			<p id="title">Land Analysis</p>
		</div>
		<div id="images-container">
			<canvas id="canvas" class="field-images" src="{{filename}}" onclick="getRGB()">
	            <script> 
	                var canvas = document.getElementById("canvas")
	                var img = new Image
	                img.src = canvas.getAttribute("src")
	                img.onload = function() {
	                    canvas.width = img.width
	                    canvas.height = img.height
	                    canvas.getContext("2d").drawImage(img, 0, 0);
	                    var processed_image = document.getElementById("processed")
	                    processed_image.src = img.src.substr(0, img.src.length - 4) + '_processed.png'
	                }
	            </script>
	        </canvas>
			<img class="field-images" id="processed" name="proc">
			<script language="javascript">
				function updateImage() {
					obj = document.proc;
					obj.src = obj.src + "?" + Math.random();
					setTimeout("updateImage()", 500);
				}
			</script>
		</div>
		<div id="summary-container">
			<div id="summary-two">
				<div id="symbol-container">
					<img id="symbol" src="" />
				</div>
				<div id="summary-text-container">
					<div id="summary-title-container">
						<p id="summary-title">Farmable Area 1</p>
					</div>
					<div id="summary-subtitle-container">
						<p id="summary-subtitle">Suggestion: </p>
					</div>
					<div id="summary-member-one-container">
						<p id="summary-member-one">Soil Color</p>
						<img id="summary-member-one-icon" src="img/info.png"/>
					</div>
					<div id="summary-member-two-container">
						<p id="summary-member-two">Climate Trends</p>
						<img id="summary-member-two-icon" src="img/info.png"/>
					</div>
				</div>
			</div>
		</div>
		<div id="additional-info-container">
			<div id="additional-info">
				<div id="additional-info-title-container">
					<p id="additional-info-title"></p>
				</div>
				<div id="additional-info-data-container">
					<div class="additional-info-data" id="additional-info-data-color" style="background-color: rgb({{soil_color_r}},{{soil_color_g}},{{soil_color_b}});">
					</div>
					<div class="additional-info-data" id="additional-info-data-text-one">
						{{soil_munsell_fine}}
					</div>
					<div class="additional-info-data" id="additional-info-data-text-two">
						{{soil_munsell_color}} {{soil_water_content}}
					</div>
				</div>
				<div id="additional-info-indication-container">
					<ul>
						<li id="additional-info-indication-one">{{soil_indicates}}</li>
						<li id="additional-info-indication-two">{{soil_munsell_fine}}</li>
						<li id="additional-info-indication-three">{{precipitation}}</li>
						<li id="additional-info-indication-four">{{soil_indicates}}</li>
					</ul>
				</div>
			</div>
		</div>
	</body>
</html>
